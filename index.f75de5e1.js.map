{"mappings":"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","sources":["src/scripts/main.js"],"sourcesContent":["'use strict';\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  const table = document.querySelector('table');\n  const tableBody = table.querySelector('tbody');\n  const tableHeaders = table.querySelectorAll('th');\n  const form = document.createElement('form');\n  const notification = document.createElement('div');\n\n  let sortOrder = 1;\n  let editedCell = false;\n\n  notification.setAttribute('data-qa', 'notification');\n  form.className = 'new-employee-form';\n\n  const formInputs = [\n    {\n      label: 'Name',\n      type: 'text',\n      fieldName: 'name',\n      qa: 'name',\n    },\n    {\n      label: 'position',\n      type: 'text',\n      fieldName: 'position',\n      qa: 'position',\n    },\n    {\n      label: 'Office',\n      type: 'select',\n      fieldName: 'office',\n      qa: 'office',\n      options: ['Tokyo', 'Singapore', 'London', 'New York',\n        'Edinburgh', 'San Francisco'],\n    },\n    {\n      label: 'age',\n      type: 'number',\n      fieldName: 'age',\n      qa: 'age',\n    },\n    {\n      label: 'salary',\n      type: 'number',\n      fieldName: 'salary',\n      qa: 'salary',\n    },\n  ];\n\n  const createForm = ({ label, type, fieldName, qa, options }) => {\n    const inputLabel = document.createElement('label');\n    const input = type === 'select'\n      ? document.createElement('select')\n      : document.createElement('input');\n\n    input.name = fieldName;\n\n    if (type === 'select') {\n      options.forEach((elem) => {\n        const option = document.createElement('option');\n\n        option.value = elem;\n        option.textContent = elem;\n\n        input.append(option);\n      });\n    } else {\n      input.type = type;\n    }\n\n    if (fieldName === 'name') {\n      input.setAttribute('minLength', '4');\n      input.setAttribute('maxLength', '50');\n      input.setAttribute('placeholder', 'length between 4-50');\n    }\n\n    if (fieldName === 'age') {\n      input.setAttribute('min', '18');\n      input.setAttribute('max', '90');\n      input.setAttribute('placeholder', 'age between 18-90');\n    }\n\n    inputLabel.setAttribute('data-qa', qa);\n    inputLabel.innerHTML = `${label}: `;\n    inputLabel.append(input);\n    form.append(inputLabel);\n\n    return input;\n  };\n\n  function showNotification(type, message) {\n    notification.className = type;\n    notification.textContent = message;\n  }\n\n  formInputs.forEach(createForm);\n\n  document.body.appendChild(form);\n\n  const submitButton = document.createElement('button');\n\n  submitButton.className = 'button';\n  submitButton.textContent = 'Save to table';\n\n  submitButton.addEventListener('click', (e) => {\n    e.preventDefault();\n    employeeValidation();\n    document.body.appendChild(notification);\n\n    setTimeout(() => {\n      notification.remove();\n    }, 3000);\n  });\n  form.append(submitButton);\n\n  function addEmployeeToTable(employee) {\n    const newRow = document.createElement('tr');\n\n    Object.values(employee).forEach((value) => {\n      const cell = document.createElement('td');\n\n      cell.textContent = value;\n      newRow.append(cell);\n    });\n    tableBody.append(newRow);\n  }\n\n  function employeeValidation() {\n    const newEmployee = {};\n    let isCorrect = true;\n\n    formInputs.forEach(({ fieldName }) => {\n      const input = form.querySelector(`[name='${fieldName}']`);\n\n      newEmployee[fieldName] = fieldName === 'salary'\n        ? `$${parseFloat(input.value).toLocaleString(\n          'en-US')}`\n        : input.value;\n\n      if (input.value.trim() === '') {\n        isCorrect = false;\n\n        showNotification('error',\n          'all fields required');\n      }\n\n      if (!input.checkValidity()) {\n        isCorrect = false;\n\n        showNotification('error',\n          'check values in inputs ');\n      }\n    });\n\n    if (isCorrect) {\n      addEmployeeToTable(newEmployee);\n      showNotification('success', 'success, new Person in our team!!');\n      form.reset();\n    }\n  }\n\n  tableBody.addEventListener('dblclick', cellRename);\n\n  function save(cell, input) {\n    cell.textContent = input.value;\n    input.remove();\n    editedCell = false;\n  }\n\n  function cellRename(e) {\n    const cell = e.target.closest('td');\n    const input = document.createElement('input');\n    const prevValue = cell.textContent;\n\n    if (cell && !editedCell) {\n      editedCell = true;\n\n      input.addEventListener('blur', function() {\n        save(cell, input);\n      });\n\n      input.addEventListener('keydown', function(ev) {\n        if (ev.key === 'Enter') {\n          save(cell, input);\n        }\n      });\n\n      input.value = prevValue;\n      input.className = 'cell-input';\n      input.style.width = `${cell.getBoundingClientRect().width - 36}px`;\n      cell.textContent = '';\n      cell.appendChild(input);\n    }\n  }\n\n  tableHeaders.forEach((header, index) => {\n    header.addEventListener('click', () => sortAb(index));\n  });\n\n  function sortAb(index) {\n    const rows = Array.from(document.querySelectorAll('table tbody tr'));\n\n    sortOrder = -sortOrder;\n\n    rows.sort((a, b) => {\n      const parseValue = (value) => {\n        return parseFloat(value.replace(/[$,]/g, '')) || value;\n      };\n\n      const aValue = parseValue(a.children[index].textContent);\n      const bValue = parseValue(b.children[index].textContent);\n\n      if (aValue < bValue) {\n        return 1 * sortOrder;\n      }\n\n      if (aValue > bValue) {\n        return -1 * sortOrder;\n      } else {\n        return 0;\n      }\n    });\n    tableBody.innerHTML = '';\n    rows.forEach(row => tableBody.appendChild(row));\n  }\n\n  tableBody.addEventListener('click', function(e) {\n    const clickedRow = e.target.closest('tr');\n\n    if (clickedRow) {\n      const index = Array.from(tableBody.children).indexOf(clickedRow);\n\n      selectRow(index);\n    }\n  });\n\n  function selectRow(index) {\n    const tableBodyRows = Array.from(\n      document.querySelectorAll('table tbody tr'));\n\n    const selectedRow = tableBodyRows[index];\n\n    if (selectedRow) {\n      tableBodyRows.forEach(row => row.classList.remove('active'));\n      selectedRow.className = 'active';\n    }\n  }\n});\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}